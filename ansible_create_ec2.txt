---
- name: Provision an EC2 instance
  hosts: localhost
  connection: local
  gather_facts: false
  vars:
    region: us-east-1 # Specify your desired AWS region
    instance_type: t3.micro
    ami_id: ami-07860a2d7eb515d9a # Replace with a valid AMI ID for your region
    key_name: my-docker # Replace with your existing EC2 key pair name
    security_group_name: docker # Replace with your desired security group name or ID
    instance_name: MyAnsibleEC2Instance

  tasks:
    - name: Create EC2 instance
      amazon.aws.ec2_instance:
        name: "{{ instance_name }}"
        key_name: "{{ key_name }}"
        image_id: "{{ ami_id }}"
        instance_type: "{{ instance_type }}"
        security_groups:
          - "{{ security_group_name }}"
        region: "{{ region }}"
        wait: true # Wait for the instance to reach a running state
        tags:
          Name: "{{ instance_name }}"
          Environment: Development
      register: ec2_info

    - name: EC2 Instance Created
      debug:
        msg: "EC2 instance created"
